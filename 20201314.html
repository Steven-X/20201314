<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>爱你爱你，一生一世</title>
    <script type="text/javascript">

        let height;
        let width;
        let wrapper;
        let heartWrapper;

        let getSquaredDist = (posX1, posY1, posX2, posY2) => Math.pow(posX1 - posX2, 2) + Math.pow(posY1 - posY2, 2);

        let cssToCartesianX = cssX => cssX - width / 2;
        let cssToCartesianY = cssY => height / 2 - cssY;

        let getRandom = (n, m) => {
            let source = [];
            source.length = n;
            for (let i = 0; i < n; i++) {
                source[i] = i;
            }
            let array = [];
            for (let i = 0; i < m; i++) {
                let index = Math.floor(Math.random() * source.length);
                let number = source[index];
                array.push(number);
                source.splice(index, 1);
            }
            array.sort((a, b) => a - b);
            return array;
        };

        let writeHeartContour = (scannedFront, y) => {
            let heartContour = document.createElement("div");
            heartContour.className = "heart-contour";
            heartContour.style.left = scannedFront + "px";
            heartContour.style.top = y + "px";
            heartWrapper.appendChild(heartContour);
        };

        let bubbleBurst = (x, y, distance) => {
            let bubble = document.createElement("div");
            bubble.className = "bubble";
            bubble.style.left = x - 6 + "px";
            bubble.style.top = y - 6 + "px";
            wrapper.appendChild(bubble);
            let angle = Math.random() * Math.PI * 2;
            let topIncrement = Math.sin(angle);
            let leftIncrement = Math.cos(angle);
            for (let i = 1; i <= 20; i++) {
                setTimeout(function() {
                    if (i < 20) {
                        bubble.style.opacity = 1-i/20 + "";
                        bubble.style.top = bubble.offsetTop - topIncrement * (distance / 20) + "px";
                        bubble.style.left = bubble.offsetLeft - leftIncrement * (distance / 20) + "px";
                    } else {
                        bubble.parentNode.removeChild(bubble);
                    }
                }, i*50);
            }
        };

        window.onload = () => {
            height = window.innerHeight;
            width = window.innerWidth;
            wrapper = document.getElementById("wrapper");
            wrapper.style.height = height + "px";
            wrapper.style.width = width + "px";

            // TODO choose music
            let music = document.createElement("audio");
            music.setAttribute("src", "audio.m4a");
            music.setAttribute("type", "audio/aac");
            music.setAttribute("loop", "loop");
            document.getElementById("wrapper").appendChild(music);

            let wantMusic = confirm("打开背景音乐吗？");
            if (wantMusic) {
                music.setAttribute("autoplay", "autoplay");

                /**
                 * Show controls only if autoplay is disabled
                 */
                // music.oncanplay = function() {
                //     if (music.paused) {
                //         music.setAttribute("controls", "controls");
                //     }
                // }

                /**
                 * Always show controls if want music
                 */
                music.setAttribute("controls", "controls");
            }

            let heartCoordinatesX = [0.0,1.5999200017333115E-4,0.0012797440221855563,0.004318056379037304,0.010231810839324737,0.019975013537430596,0.03449784050038478,0.05474568665994886,0.08165821921533896,0.11616843620808079,0.15920173116579522,0.21167496466624308,0.2744955436667241,0.34856050943692585,0.43475563492557023,0.5339545323826981,0.6470177720502002,0.7747920127232217,0.9181091449743777,1.0777854478213003,1.2546207596059322,1.4493976638411687,1.6628806907669682,1.8958155353438917,2.148928292397226,2.422924709609387,2.7184894590422064,3.0362854278540374,3.376953028859279,3.741109531560065,4.1293484142614165,4.542238737862139,4.980324541894206,5.444124263363388,5.934130178923217,6.450807870893494,6.994595717612906,7.565904408593544,8.165116484922601,8.792585905333958,9.44863763834902,10.13356728086286,10.847640703527805,11.591093723262404,12.364131803189357,13.16692978028128,13.999631620968005,14.862350204934202,15.755167137310513,16.67813258943575,17.631265168342203,18.614551815089882,19.627947732049776,20.671376339210028,21.74472925955264,22.847866333522383,23.980615662583,25.142773681830025,26.33410526160272,27.55434383801227,28.803191572276468,30.080319538725885,31.38536794132008,32.717946358487175,34.0776340160741,35.46398008817003,36.87650402553972,38.31469591137917,39.778016844081094,41.26589934667308,42.77774780256803,44.31293891724167,45.870822205429505,47.450720503411986,49.05193050593401,50.67372332728332,52.31534508602935,53.976017512904036,55.654938581284256,57.35128315971551,59.064203685896786,60.7928308615266,62.53627436739191,64.29362359806304,66.06394841553993,67.84629992117854,69.63971124520847,71.44319835313857,73.25576086833048,75.0763829100067,76.90403394594492,78.73766965909739,80.5762328273618,82.41865421571777,84.26385347993168,86.11074008102318,87.95821420967548,89.80516771976355,91.65048507016576,93.49304427401675,95.331717854553,97.16537380669594,98.99287656351291,100.81308796669114,102.62486824015689,104.42707696596813,106.21857406160788,107.99822075780385,109.76488057599818,111.5174203045938,113.25471097310229,114.97562882332197,116.67905627667592,118.36388289684473,120.0290063468311,121.67333333959985,123.29578058144153,124.89527570721515,126.47075820663177,128.02118034074996,129.54550804786138,131.04272183795553,132.511817674962,133.95180784598008,135.36172181671628,136.74060707236424,138.0875299431726,139.40157641396172,140.68185291686348,141.92748710657358,143.13762861742222,144.31144980158365,145.4481464477639,146.5469384797222,147.6070706339994,148.62781311624698,149.60846223556763,150.54834101629882,151.44679978669103,152.3032167439533,153.11699849515884,153.8875805735262,154.61442792961356,155.29703539698463,155.93492813192992,156.52766202684862,157.07482409692,157.57603283971844,158.0309385674495,158.4392237115088,158.8006030990905,159.11482420159825,159.38166735463523,159.60094594937564,159.77250659514732,159.89622925307802,159.97202734068733,159.99984780732888,159.97967118041623,159.9115115823904,159.79541671841423,159.63146783480428,159.41977964823766,159.1605002457975,158.85381095594633,158.49992619054308,158.09909325804557,157.6515921480663,157.15773528747343,156.61786726825733,156.03236454740545,155.4016351190552,154.72611815921826,154.00628364339605,153.2426319374272,152.43569336193602,151.5860277307708,150.6942238638468,149.76089907483004,148.7866986341214,147.7722952076228,146.71838827178752,145.62570350548089,144.494992159194,143.32703040217868,142.1226186480863,140.88258085971688,139.60776383350048,138.29903646435298,136.95728899156416,135.58343222639505,134.17839676207623,132.74313216691485,131.27860616123394,129.78580377888105,128.26572651405849,126.71939145423812,125.14783039993927,123.55208897215712,121.93322570824186,120.29231114703862,118.63042690410693,116.9486647378495,115.24812560738526,113.52991872301162,111.79516059010567,110.04497404732079,108.28048729993992,106.5028329492512,104.71314701881448,102.912567978491,101.10223576710966,99.28329081464466,97.4568730647797,95.6241209987339,93.78617066122177,91.9441546894206,90.09920134581205,88.25243355576444,86.40496795071628,84.55791391781622,82.71237265686975,80.86943624543564,79.03018671290802,77.19569512441123,75.36702067532657,73.54520979725989,71.73129527624832,69.92629538399424,68.13121302290172,66.34703488567934,64.57473063025854,62.815252070764885,61.06953238526291,59.338485340981684,57.623004537711836,55.92396267004788,54.24221080913391,52.578577704551336,50.93386910697124,49.30886711217313,47.70432952701417,46.12098925791186,44.55955372238431,43.02070428416964,41.505095712426396,40.01335566549393,38.546084199670446,37.1038533034431,35.687206457581986,34.29665822148651,32.93269384614874,31.595768914074437,30.286309006478316,29.004709398045065,27.75133477952332,26.526519008394057,25.33056488783037,24.163743974139177,23.026296412850353,21.918430803592763,20.840324093870603,19.79212150182764,18.773936468060462,17.785850636516027,16.827913864482294,15.900144261654676,15.002528258234708,14.135020701991198,13.297544984188105,12.489993194257218,11.712226303067863,10.964074374620157,10.245336805962564,9.555782595109225,8.89515063670714,8.263150045178374,7.659460505037702,7.083732648061504,6.535588456959651,6.01462169517816,5.5203983624368504,5.052457175583066,4.610310074319711,4.193442751343383,3.8013152064064655,3.433362323795409,3.0889944726963607,2.7675981298986905,2.468536524266809,2.191150302391044,1.9347582148093019,1.6986578221726565,1.4821262207100672,1.2844207863300137,1.104779936680067,0.942423910469206,0.7965555633421568,0.6663611795801015,0.5510112988878542,0.44966155751399295,0.36145354293754267,0.28551566134255313,0.22096401709041938,0.16690330338896162,0.1224277033472039,0.08662180059542861,0.058561498641464566,0.03731494812629742,0.021943481134970893,0.011502551712391522,0.005042681728058402,0.001610411228920001,2.492524155158855E-4,6.463732967128305E-7,-9.507831146670669E-5,-9.977459234726043E-4,-0.0036663738510750985,-0.009058213553193438,-0.01812779313310681,-0.0318259623903501,-0.051098941219692995,-0.07688737222316924,-0.1101253783973262,-0.15173962675329294,-0.20264839872191825,-0.26376066819011657,-0.3359751880076852,-0.4201795857962213,-0.5172494698833876,-0.628047546176653,-0.753422746780771,-0.8942093711526912,-1.0512262405762802,-1.2252758667272494,-1.4171436350859759,-1.6275970039425283,-1.8573847197241544,-2.1072360493607976,-2.3778600303888213,-2.6699447394771796,-2.9841565800436385,-3.321139589611459,-3.6815147675391686,-4.065879423737699,-4.474806548970228,-4.908844207310627,-5.368514951316465,-5.854315260452027,-6.3667150032758455,-6.906156923885883,-7.47305615309353,-8.067799744775447,-8.690746237829464,-9.34222524413769,-10.022537062916681,-10.731952321810487,-11.47071164505855,-12.239025349045857,-13.037073165518127,-13.865003992719867,-14.722935674687992,-15.610954808908266,-16.529116582516338,-17.477444637199287,-18.455930962927898,-19.464535820623723,-20.503187693839003,-21.57178326950138,-22.67018744774902,-23.798233380855635,-24.95572254121868,-26.142424818357775,-27.358078644844028,-28.602391151055304,-29.875038348626177,-31.17566534243528,-32.50388657094752,-33.859286074702595,-35.24141779271604,-36.64980588653398,-38.08394509165758,-39.543301096028614,-41.02731094524327,-42.53538347413699,-44.066899764359526,-45.62121362753569,-47.1976521135846,-48.79551604374734,-50.414080567850064,-52.05259574530908,-53.71028714936142,-55.38635649398459,-57.07998228294832,-58.790320480420924,-60.51650520253388,-62.257649429288875,-64.01284573617369,-65.78116704483438,-67.56166739213634,-69.35338271692656,-71.15533166379778,-72.9665164031353,-74.78592346671712,-76.61252459811945,-78.44527761717009,-80.28312729767691,-82.12500625764787,-83.96983586120747,-85.8165271314036,-87.66398167308927,-89.51109260505424,-91.35674550057368,-93.19981933553258,-95.03918744327822,-96.87371847534715,-98.70227736720709,-100.52372630814952,-102.33692571446652,-104.14073520503942,-105.93401457846801,-107.71562479086444,-109.4844289334378,-111.23929320899347,-112.97908790647381,-114.70268837266747,-116.40897598021718,-118.09683909105962,-119.76517401443434,-121.41288595860424,-123.03888997543467,-124.64211189698595,-126.22148926327944,-127.77597224040731,-129.30452452816232,-130.80612425637557,-132.27976486915844,-133.7244559962572,-135.13922431073885,-136.52311437224014,-137.87518945502427,-139.19453236010264,-140.4802462106949,-141.7314552303131,-142.947305502774,-144.1269657134574,-145.26962787114644,-146.3745080098032,-147.44084686965016,-148.46791055694692,-149.45499118187152,-150.40140747393383,-151.30650537436952,-152.16965860498397,-152.99026921293543,-153.76776809096984,-154.5016154726402,-155.19130140206744,-155.83634617782013,-156.43630077051725,-156.99074721377707,-157.49929896816394,-157.96160125780517,-158.3773313793768,-158.74619898318122,-159.06794632606432,-159.3423484959457,-159.5692136077608,-159.74838297063832,-159.8797312261644,-159.96316645760848,-159.99863027001325,-159.98609784107728,-159.925577942784,-159.8171129337583,-159.6607787223569,-159.4566847005264,-159.20497364848785,-158.9058216103327,-158.55943774064343,-158.1660641222744,-157.72597555545744,-157.2394793184213,-156.70691489973882,-156.12865370264288,-155.50509872157497,-154.83668419125786,-154.12387520860537,-153.36716732781008,-152.56708612896995,-151.72418676064243,-150.83905345673517,-149.9122990281665,-148.94456432975187,-147.9365177027937,-146.8888543938747,-145.8022959503753,-144.6775895932575,-143.5155075676771,-142.31684647200646,-141.08242656586907,-139.81309105780664,-138.50970537321678,-137.17315640321706,-135.80435173510986,-134.4042188651363,-132.9737043942254,-131.51377320745942,-130.02540763799027,-128.50960661615645,-126.9673848045624,-125.39977171989628,-123.80781084227186,-122.19255871289317,-120.55508402084999,-118.89646667986241,-117.21779689580137,-115.52017422582031,-113.80470662994097,-112.07250951594219,-110.32470477840782,-108.5624198327933,-106.78678664537674,-104.99894075996238,-103.20002032220796,-101.39116510244968,-99.57351551789891,-97.7482116550866,-95.91639229342923,-94.07919393079085,-92.23774981191323,-90.39318896058208,-88.54663521639709,-86.69920627700547,-84.85201274665675,-83.00615719192908,-81.16273320547178,-79.3228244786003,-77.4875038835735,-75.65783256637258,-73.83485905079267,-72.01961835464756,-70.21313111887628,-68.41640275033018,-66.63042257900501,-64.8561630304706,-63.09457881423644,-61.34660612877771,-59.613161883929926,-57.89514294134634,-56.193425373694446,-54.50886374325199,-52.84229040054502,-51.194514803652055,-49.56632285878041,-47.95847628270124,-46.37171198760975,-44.80674148895753,-43.264250336782695,-41.74489757104217,-40.24931520142951,-38.778107712138656,-37.33185159201233,-35.91109489049012,-34.516356799748834,-33.1481272634031,-31.806866612111286,-30.49300522640667,-29.206943227049766,-27.94905019317245,-26.71966490846017,-25.51909513559221,-24.3476174191356,-23.205476917061674,-22.09288726102904,-21.01003044555066,-19.957056746136452,-18.934084666477048,-17.941200914707938,-16.97846040876708,-16.045886310832817,-15.143470090802666,-14.271171618747555,-13.42891928624969,-12.616610156506384,-11.83411014305624,-11.081254216958163,-10.357846642228182,-9.663661239313402,-8.998441676357409,-8.361901787986056,-7.753725921318074,-7.173569308880179,-6.62105846808228,-6.095791626884274,-5.597339175262473,-5.12524414206034,-4.679022696785417,-4.2581646758917495,-3.8621341330651724,-3.490369913007064,-3.1422862481910725,-2.8172733780466124,-2.51469819000269,-2.23390488180593,-1.9742156445075179,-1.7349313654951228,-1.515332350927826,-1.3146790669145683,-1.132212898759779,-0.967156927583521,-0.8187167236078706,-0.6860811553862096,-0.5684232142377544,-0.46490085313592844,-0.3746578392861857,-0.2968246196165331,-0.23051919839237894,-0.17484802615640638,-0.12890689918396284,-0.09178186863498844,-0.06255015857476069,-0.04028109202774959,-0.024037024221633195,-0.01287428217204854,-0.005844109752937854,-0.001993617392407915,-3.6673552985256897E-4,-5.170966699280713E-6];
            let heartCoordinatesY = [50.0,50.020497979248056,50.08196767187592,50.18433637182963,50.32748299996257,50.51123825031108,50.735384794600506,50.99965754470382,51.30374397269418,51.64728448805601,52.02987287154031,52.45105676507294,52.910338217049585,53.407174282274035,53.94097767572396,54.51111747925488,55.11691990028085,55.75766908140126,56.43260795987361,57.140939175765226,57.88182602755194,58.65439347386775,59.45772918004746,60.290884608045694,61.15287614825717,62.04268629170737,62.9592648410309,63.90153015860223,64.86837045013614,65.85864508202854,66.87118593066485,67.90479876188233,68.95826463873401,70.03034135566656,71.11976489719144,72.2252509190979,73.34549625023054,74.47918041282786,75.62496715939814,76.78150602408957,77.94743388649623,79.1213765458286,80.30195030336763,81.48776355111497,82.6774183645476,83.86951209738484,85.06263897627831,86.2553916933396,87.44636299443019,88.63414726114786,89.81734208445887,90.9945498279425,92.16437917863382,93.32544668347352,94.4763782693997,95.61581074514501,96.74239328283275,97.85478887750004,98.95167578271375,100.03174892048058,101.09372126369874,102.1363251894382,103.15831380138634,104.15846221984184,105.13556883769235,106.08845654086312,107.01597389177998,107.91699627444542,108.79042699978751,109.6351983699999,110.45027270065523,111.23464329943695,111.9873354004011,112.70740705274497,113.39394996312963,114.04609029067083,114.66298939378424,115.24384452814203,115.78788949507006,116.29439523978797,116.76267039896841,117.19206179716483,117.58195489173347,117.93177416594853,118.24098347008555,118.50908631032299,118.73562608538712,118.92018627094004,119.0623905517863,119.16190290204676,119.21842761352345,119.23170927255131,119.20153268570687,119.12772275481332,119.0101443017557,118.848701843686,118.64333931927013,118.39403976669396,118.10082495421273,117.76375496409318,117.3829277308603,116.95847853482275,116.49057945191124,115.97943876092162,115.42530030931113,114.82844283875117,114.18917927169136,113.50785596024085,112.78485189872018,112.02057790128343,111.21547574605376,110.37001728725691,109.48470353687529,108.56006371738273,107.59665428715329,106.59505794016822,105.55588258167512,104.47976028147828,103.36734620656314,102.21931753477863,101.03637235131822,99.81922852975735,98.56862259941579,97.28530860082428,95.97005693108136,94.62365318089043,93.24689696506937,91.84060074832189,90.40558866805799,88.94269535604268,87.45276476064262,85.93664897142904,84.39520704787958,82.82930385390455,81.23980889990334,79.62759519403346,77.99353810435005,76.33851423344608,74.66340030719297,72.96907207915011,71.25640325217555,69.52626441873478,67.77952202136463,66.01703733470815,64.23966547049379,62.44825440678643,60.64364404279105,58.8266652804414,56.99813913395488,55.15887586848329,53.30967416893537,51.45132033999157,49.58458753827546,47.710235037588696,45.82900752805672,43.941634449973435,42.04882936307155,40.15128935188396,38.24969446779866,36.344707208346726,34.43697203419903,32.52711492428353,30.6157429693697,28.703444004402634,26.79078627980422,24.87831817189327,22.966567932512657,21.056043477885655,19.147232216660118,17.240600917034527,15.336595612796721,13.435641548042659,11.53814316028079,9.644484101565649,7.755027297243837,5.870115041835744,3.990069131517613,2.1151910326117163,0.24576208543497513,-1.6179562571971884,-3.4757221575694475,-5.327313087577031,-7.172525491007327,-9.011174414501768,-10.843093108153079,-12.668132596738623,-14.48616122263446,-16.297064161494962,-18.100742911823666,-19.89711475959727,-21.68611221914062,-23.467682451483626,-25.241786661461546,-27.00839947484937,-28.767508296846845,-30.519112653255323,-32.26322351570875,-33.99986261234109,-35.72906172528879,-37.450861976441885,-39.16531310286932,-40.872472723353454,-42.572405597476,-44.26518287870256,-45.950881362914984,-47.6295827338403,-49.30137280682281,-50.96634077238039,-52.62457844097875,-54.276179490447234,-55.92123871744782,-57.559851294393596,-59.19211203319711,-60.81811465720827,-62.43795108268141,-64.05171071108629,-65.65947973355279,-67.26134044871004,-68.85737059515209,-70.44764269972876,-72.03222344282754,-73.61117304177554,-75.18454465345391,-76.75238379717666,-78.3147277988458,-79.87160525735126,-81.42303553414044,-82.96902826683633,-84.50958290773633,-86.04468828797553,-87.57432220808916,-89.09845105565772,-90.61702945066776,-92.12999991916757,-93.63729259574512,-95.13882495530035,-96.63450157453002,-98.12421392348773,-99.60784018752645,-101.08524511987405,-102.55627992503703,-104.02078217317049,-105.47857574549587,-106.92947081079195,-108.37326383292749,-109.80973760934876,-111.23866134037762,-112.65979072912272,-114.07286811174887,-115.4776226177978,-116.87377036019741,-118.2610146545455,-119.63904626720172,-121.0075436916689,-122.36617345269713,-123.71459043749343,-125.05243825337226,-126.37934961113692,-127.69494673343502,-128.99884178728922,-130.29063733996122,-131.56992683726673,-132.8362951034208,-134.08931886145447,-135.32856727320984,-136.55360249788546,-137.7639802680738,-138.95925048220113,-140.1389578122538,-141.3026423256483,-142.44984012007896,-143.58008397015573,-144.69290398462462,-145.78782827294643,-146.8643836199944,-147.9220961676178,-148.96049210180905,-149.97909834420216,-150.97744324662557,-151.95505728742748,-152.91147376829036,-153.84622951025344,-154.7588655476623,-155.64892781877262,-156.51596785174084,-157.3595434447452,-158.17921933899163,-158.9745678833744,-159.7451696895761,-160.49061427641226,-161.21050070224322,-161.90443818430208,-162.57204670380912,-163.21295759577222,-163.8268141223989,-164.41327202907843,-164.97200008192277,-165.50268058589046,-166.00500988255234,-166.47869882659646,-166.92347324020673,-167.33907434449307,-167.72525916718922,-168.08180092588117,-168.40848938607095,-168.7051311934282,-168.9715501796276,-169.20758764121857,-169.4131025910235,-169.58797198160846,-169.7320909004235,-169.84537273625872,-169.92774931671562,-169.97917101644492,-169.9996068359555,-169.98904445085162,-169.94749023141003,-169.87496923246073,-169.7715251535901,-169.63722026973895,-169.47213533231977,-169.27636944103267,-169.05003988661161,-168.7932819647853,-168.50624876178904,-168.18911091181513,-167.84205632684163,-167.46528989932696,-167.05903317830902,-166.62352401949536,-166.1590162099775,-165.66577906824847,-165.1440970202504,-164.59426915221744,-164.01660874112721,-163.4114427636108,-162.7791113842137,-162.11996742393484,-161.43437581001115,-160.72271300794534,-159.98536643681084,-159.222733868897,-158.43522281478758,-157.6232498949922,-156.7872401992764,-155.92762663485848,-155.04484926466344,-154.1393546368423,-153.21159510678297,-152.26202815285342,-151.29111568713023,-150.2993233623769,-149.2871198765428,-148.25497627606202,-147.20336525923284,-146.13276048096114,-145.0436358601502,-143.93646489101553,-142.81171995959883,-141.66987166674684,-140.5113881588114,-139.33673446731427,-138.14637185880662,-136.94075719613605,-135.72034231231504,-134.48557339816426,-133.23689040488102,-131.9747264626576,-130.69950731644778,-129.4116507799498,-128.1115662088439,-126.79965399428858,-125.47630507764595,-124.14190048736857,-122.79681089894325,-121.44139621874594,-120.07600519262147,-118.70097503995736,-117.31663111397772,-115.92328658893605,-114.52124217483914,-113.11078586028577,-111.69219268395338,-110.26572453521649,-108.83162998432765,-107.39014414253947,-105.94148855249364,-104.48587110914704,-103.02348601145214,-101.55451374495209,-100.07912109539588,-98.59746119342283,-97.10967359030924,-95.61588436471317,-94.11620626029756,-92.61073885405492,-91.09956875509994,-89.58276983364183,-88.06040347978994,-86.53251889179387,-84.99915339326121,-83.4603327788446,-81.91607168783452,-80.3663740050417,-78.8112332883025,-77.25063322188765,-75.68454809504712,-74.11294330487338,-72.5357758826197,-70.95299504256215,-69.36454275245151,-67.77035432455644,-66.17035902625818,-64.56448070911789,-62.95263845529835,-61.33474724018615,-59.71071861002555,-58.080461373342956,-56.44388230490946,-54.80088686096123,-53.15137990437059,-51.49526643843568,-49.832452347935224,-48.162845146074744,-46.486354725932024,-44.802894114995546,-43.112380231375326,-41.41473464025577,-39.70988430915115,-37.99776236051902,-36.27830882028312,-34.55147136081608,-32.81720603693447,-31.075478013461534,-29.326262282920503,-27.569544371929204,-25.805321034878766,-24.03360093349231,-22.254405300876314,-20.467768588695314,-18.673739096122077,-16.872379579238398,-15.063767839587452,-13.247997290606586,-11.425177500699771,-9.595434711740896,-7.758912331834611,-5.915771401196961,-4.066191030057963,-2.2103688075283676,-0.34852118041576396,1.519116198979853,3.3922881570150065,5.27071971567141,7.1541158431701115,9.042161239005003,10.934520154116921,12.830836246874801,14.730732475474802,16.63381102731083,18.53965328581222,20.44781983518428,22.357850503427535,24.269264443950078,26.18156025602523,28.094216144284054,30.006690117368855,31.918420225809804,33.82882483912249,35.73730296205963,37.64323458988529,39.545981102474876,41.44488569697964,43.3392738587289,45.228453869979234,47.11171735605521,48.988339868362445,50.85758150369038,52.71868755915936,54.57088922210487,56.41340429413017,58.2454379484987,60.066183519978395,61.87482332619154,63.67052951946759,65.45246496814039,67.2197841661772,68.97163416997455,70.70715556110451,72.42548343374632,74.12574840548973,75.80707765015178,77.46859595120446,79.10942677436833,80.72869335788883,82.32551981897319,83.89903227483082,85.44835997672756,86.97263645543273,88.47100067640983,89.94259820307548,91.38658236642895,92.80211543933191,94.18836981370134,95.54452917886188,96.86978969929166,98.16336118998406,99.42446828764179,100.65235161591355,101.8462689428815,103.00549632900916,104.12932926376166,105.21708378911674,106.2680976081943,107.28173117724305,108.25736877923754,109.19441957735656,110.09231864663248,110.95052798208499,111.76853748167694,112.54586590245815,113.28206178829397,113.97670436760754,114.62940441960087,115.23980510745788,115.8075827770726,116.33244771988927,116.81414489848528,117.25245463357636,117.64719325117198,117.99821368866168,118.30540605866604,118.5686981695418,118.78805600148893,118.96348413726568,119.09502614658047,119.1827649232903,119.22682297460128,119.22736266153174,119.1845863899662,119.0987367516959,118.97009661491222,118.79898916368913,118.58577788606215,118.33086651038549,118.03469888971884,117.69775883407254,117.32056989041152,116.90369507039489,116.4477365259011,115.95333517246566,115.42117026083226,114.85195889689393,114.24645551037563,113.60545127268401,112.92977346442541,112.22028479316651,111.4778826620841,110.70349839022492,109.89809638516743,109.06267326894712,108.19825695817819,107.30590569937138,106.38670706051707,105.4417768800665,104.47225817450936,103.479320005809,102.46415631001803,101.42798468845524,100.37204516288327,99.29759889618268,98.20592688007004,97.09832859146115,95.97612061912804,94.84063526234618,93.69321910327415,92.53523155484821,91.36804338601544,90.19303522616603,89.01159605065999,87.82512164937621,86.63501308023912,85.44267510970683,84.24951464222806,83.05693914069501,81.86635503993784,80.67916615532155,79.49677208851938,78.32056663254363,77.1519361781228,75.99225812351688,74.84289928986294,73.70521434414003,72.580544231836,71.47021462139233,70.37553436248874,69.29779396021664,68.23826406717063,67.19819399546904,66.17881025068954,65.18131508967959,64.20688510417223,63.256669832105814,62.331790398512155,61.4333381877988,60.56237354921115,59.719924537218574,58.906985688522354,58.124516837335555,57.37344197053459,56.65464812423096,55.96898432325492,55.317260564988004,54.70024684892002,54.11867225324723,53.57322405976394,53.0645469282359,52.5932421213762,52.15986678147756,51.76493325968409,51.40890849881533,51.09221347058146,50.815222667956604,50.57826365340126,50.38161666354871,50.22551427089479,50.11014110295104,50.03563361924514,50.00207994647154];

            let heartLoc = {};
            let heartLocArray = [];
            let minX = Infinity;
            let maxX = -Infinity;
            for (let xFront = 0; xFront < width; xFront++) {
                for (let y = 0; y < height; y++) {
                    for (let i = 0; i < heartCoordinatesX.length; i++) {
                        if (0.5 > getSquaredDist(cssToCartesianX(xFront), cssToCartesianY(y), heartCoordinatesX[i], heartCoordinatesY[i])) {
                            if (xFront < minX) minX = xFront;
                            if (xFront > maxX) maxX = xFront;
                            if (heartLoc[xFront]) {
                                let existingRecord = heartLoc[xFront];
                                existingRecord[y] = true;
                            } else {
                                let newRecord = {};
                                newRecord[y] = true;
                                heartLoc[xFront] = newRecord;
                            }
                            heartLocArray.push([xFront, y]);
                            break;
                        }
                    }
                }
            }
            minX--;
            maxX++;

            let scanner = document.createElement("div");
            scanner.id = "scanner";

            let scannerWidth = width / 3;
            scanner.style.marginLeft = -scannerWidth + "px";

            let scannerTailWrapper = document.createElement("div");
            scannerTailWrapper.id = "scanner-tail-wrapper";
            scannerTailWrapper.style.width = scannerWidth + "px";
            scannerTailWrapper.style.height = height + "px";

            let scannerTail = document.createElement("div");
            scannerTail.id = "scanner-tail";
            scannerTail.style.width = scannerWidth + "px";
            scannerTail.style.height = height + "px";

            let scannerTailMask = document.createElement("div");
            scannerTailMask.id = "scanner-tail-mask";
            scannerTailMask.style.width = scannerWidth + "px";
            scannerTailMask.style.height = height + "px";
            scannerTailMask.style.background = "linear-gradient(0deg, white 0%, transparent 10px, transparent " + (height-10) + "px, white 100%)";

            scannerTailWrapper.appendChild(scannerTail);
            scannerTailWrapper.appendChild(scannerTailMask);

            let scannerFront = document.createElement("div");
            scannerFront.id = "scanner-front";
            scannerFront.style.height = (height - 12) + "px";

            scanner.appendChild(scannerTailWrapper);
            scanner.appendChild(scannerFront);

            wrapper.appendChild(scanner);

            heartWrapper = document.createElement("div");
            wrapper.appendChild(heartWrapper);

            let randomLoc = [];
            for (let i = 0; i < 3; i++) {
                let currArray = getRandom(heartLocArray.length, 36);
                randomLoc.push(currArray);
            }

            for (let i = 0; i < 3; i++) {
                let contourLoc = {};
                for (let index = 0; index < randomLoc[i].length; index++) {
                    contourLoc[heartLocArray[randomLoc[i][index]]] = true;
                }
                for (let xFront = 0; xFront <= width + scannerWidth; xFront++) {
                    // if (xFront > width / 2) break;
                    setTimeout(function () {

                        for (let y = 0; y <= height; y++) {
                            scanner.style.marginLeft = xFront - scannerWidth + "px";
                            let scannedFront = xFront - 5;

                            if (contourLoc[[scannedFront, y]]) {
                                // writeHeartContour(scannedFront, y);
                                bubbleBurst(scannedFront, y, 40);
                            }

                            if (i === 2) {
                                if (scannedFront > minX && scannedFront < maxX && heartLoc[scannedFront] && heartLoc[scannedFront][y]) {
                                    writeHeartContour(scannedFront, y);
                                }
                            }
                        }
                        if (i === 2 && xFront + 1 > width + scannerWidth) {
                            wrapper.removeChild(scanner);
                        }
                    }, ((Math.floor(width + scannerWidth) + 1) * i + xFront) * 5);
                }
            }
        };
    </script>
    <style type="text/css">
        body, div#wrapper {
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        div#scanner {
            position: absolute;
        }

        div#scanner-tail-wrapper {
            display: inline-block;
        }

        div#scanner-tail {
            position: absolute;
            background: linear-gradient(to right, transparent 0%, lightpink 100%);
        }

        div#scanner-tail-mask {
            position: absolute;
        }

        div#scanner-front {
            display: inline-block;
            width: 10px;
            border-radius: 5px;
            margin-bottom: 6px;
            margin-left: 1px;
            background-color: hotpink;
            box-shadow: 0 0 5px 1px deeppink;
        }

        div.heart-contour {
            position: absolute;
            height: 5px;
            width: 5px;
            border-radius: 3px;
            background-color: deeppink;
        }

        div.bubble {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 10px;
            background: radial-gradient(circle, white, #ff99cc, transparent, transparent);
            z-index: 99;
        }
    </style>
</head>

<body>
<div id="wrapper">
</div>
</body>

</html>